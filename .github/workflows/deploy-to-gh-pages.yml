name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main # This workflow triggers on pushes to the main branch.

jobs:
  deploy:
    runs-on: ubuntu-latest # Uses the latest Ubuntu environment

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2 # Checks out your repository under $GITHUB_WORKSPACE

    - name: Setup Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '16' # Sets up Node.js 16.x

    - name: Install Dependencies
      run: npm install # Installs your project dependencies

    - name: Build
      run: npm run build
      env:
        CI: false

    - name: Deploy to GitHub Pages
      uses: JamesIves/github-pages-deploy-action@4.1.5
      with:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # Uses a built-in GitHub token to authenticate
        branch: gh-pages # The branch to deploy to
        folder: build # The folder to deploy from
        clean: true # Cleans up removed files from the deployment
